{
  "dns": {
    "servers": [
      {"tag": "domestic_dns", "type": "https", "server": "223.5.5.5"},
      {"tag": "foreign_dns", "type": "https", "server": "8.8.8.8", "detour": "代理"}
    ],
    "rules": [
      {"query_type": "HTTPS", "action": "reject"},
      {"clash_mode": "direct", "server": "domestic_dns"},
      {"clash_mode": "global", "server": "foreign_dns"},
      {"rule_set": ["steam@cn_domain", "games-cn_domain", "game-platforms-download_domain", "entertainment-cn_domain", "apple_domain", "microsoft@cn_domain", "cn_domain", "custom_direct_class"], "server": "domestic_dns"}
    ],
    "final": "foreign_dns",
    "independent_cache": true,
    "reverse_mapping": true
  },
  "outbounds": [
    {"tag": "国内", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "直连"},
    {"tag": "电报", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "社媒", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "AI", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "美国"},
    {"tag": "油管", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "谷歌", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "游戏", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "特殊", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "美国"},
    {"tag": "娱乐", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "台湾"},
    {"tag": "涩涩", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "台湾"},
    {"tag": "代理", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "兜底", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "直连"},
    {"tag": "香港", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 50, "outbounds": []},
    {"tag": "台湾", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 50, "outbounds": []},
    {"tag": "新加坡", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 50, "outbounds": []},
    {"tag": "日本", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 50, "outbounds": []},
    {"tag": "美国", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 50, "outbounds": []},
    {"tag": "GLOBAL", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "直连", "type": "direct"}
  ],
  "route": {
    "rules": [
      {"action": "sniff", "sniffer": ["http", "tls", "quic", "dns"]},
      {"inbound": ["dns-in"], "action": "hijack-dns"},
      {"protocol": ["quic"], "action": "reject"},
      {"ip_is_private": true, "outbound": "直连"},
      {"clash_mode": "direct", "outbound": "直连"},
      {"clash_mode": "global", "outbound": "GLOBAL"},
      {"rule_set": ["steam@cn_domain", "games-cn_domain", "game-platforms-download_domain", "entertainment-cn_domain", "apple_domain", "microsoft@cn_domain"], "outbound": "国内"},
      {"rule_set": ["telegram_domain"], "outbound": "电报"},
      {"rule_set": ["social-media-!cn_domain"], "outbound": "社媒"},
      {"rule_set": ["ai-!cn_domain"], "outbound": "AI"},
      {"rule_set": ["youtube_domain"], "outbound": "油管"},
      {"rule_set": ["google_domain"], "outbound": "谷歌"},
      {"rule_set": ["games-!cn_domain"], "outbound": "游戏"},
      {"domain_keyword": ["sankaku"], "outbound": "特殊"},
      {"rule_set": ["mega_domain", "ehentai_domain"], "outbound": "特殊"},
      {"domain_keyword": ["iwara", "emby"], "outbound": "娱乐"},
      {"rule_set": ["porn_domain"], "outbound": "涩涩"},
      {"rule_set": ["entertainment_domain"], "outbound": "娱乐"},
      {"rule_set": ["gfw_domain", "geolocation-!cn_domain"], "outbound": "代理"},
      {"rule_set": ["cn_domain"], "outbound": "国内"},
      {"rule_set": ["telegram_ip"], "outbound": "电报"},
      {"rule_set": ["cn_ip", "custom_direct_class"], "outbound": "国内"},
      {"rule_set": ["custom_proxy_class"], "outbound": "代理"}
    ],
    "final": "兜底",
    "rule_set": [
      {"tag": "steam@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/steam@cn.srs", "download_detour": "代理"},
      {"tag": "games-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-cn.srs", "download_detour": "代理"},
      {"tag": "game-platforms-download_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-game-platforms-download.srs", "download_detour": "代理"},
      {"tag": "entertainment-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment-cn.srs", "download_detour": "代理"},
      {"tag": "apple_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple.srs", "download_detour": "代理"},
      {"tag": "microsoft@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/microsoft@cn.srs", "download_detour": "代理"},
      {"tag": "telegram_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/telegram.srs", "download_detour": "代理"},
      {"tag": "social-media-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-social-media-!cn.srs", "download_detour": "代理"},
      {"tag": "ai-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-ai-!cn.srs", "download_detour": "代理"},
      {"tag": "youtube_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs", "download_detour": "代理"},
      {"tag": "google_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/google.srs", "download_detour": "代理"},
      {"tag": "games-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-!cn.srs", "download_detour": "代理"},
      {"tag": "mega_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/mega.srs", "download_detour": "代理"},
      {"tag": "ehentai_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/ehentai.srs", "download_detour": "代理"},
      {"tag": "entertainment_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment.srs", "download_detour": "代理"},
      {"tag": "porn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-porn.srs", "download_detour": "代理"},
      {"tag": "gfw_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/gfw.srs", "download_detour": "代理"},
      {"tag": "geolocation-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/geolocation-!cn.srs", "download_detour": "代理"},
      {"tag": "cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cn.srs", "download_detour": "代理"},
      {"tag": "telegram_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs", "download_detour": "代理"},
      {"tag": "cn_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/cn.srs", "download_detour": "代理"},
      {"tag": "custom_direct_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_direct.json", "download_detour": "代理"},
      {"tag": "custom_proxy_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_proxy.json", "download_detour": "代理"}
    ],
    "default_domain_resolver": {"server": "domestic_dns"}
  },
  "inbounds": [
    {"tag": "dns-in", "type": "direct", "listen": "::", "listen_port": 1053},
    {"tag": "mixed-in", "type": "mixed", "listen": "::", "listen_port": 7890, "users": [{"username": "user", "password": "password"}]},
    {"tag": "socks-in", "type": "socks", "listen": "::", "listen_port": 7882, "users": [{"username": "user", "password": "password"}]},
    {"tag": "redirect-in", "type": "redirect", "listen": "::", "listen_port": 7891},
    {"tag": "tproxy-in", "type": "tproxy", "listen": "::", "listen_port": 7892},
    {"tag": "tun-in", "type": "tun", "interface_name": "stun0", "address": ["172.31.0.1/30", "fdfe:dcba:9876::1/126"], "auto_route": false, "auto_redirect": false}
  ],
  "experimental": {
    "cache_file": {"enabled": true, "path": "/etc/momo/run/cache.db", "store_rdrc": true},
    "clash_api": {
      "external_controller": "0.0.0.0:9090",
      "secret": "password",
      "external_ui": "/etc/momo/run/ui",
      "external_ui_download_url": "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip",
      "external_ui_download_detour": "代理",
      "default_mode": "rule"
    }
  },
  "log": {"disabled": false, "level": "error", "timestamp": true}
}
