{
  "dns": {
    "servers": [
      {"tag": "domestic", "type": "udp", "server": "223.5.5.5"},
      {"tag": "foreign", "type": "tls", "server": "1.1.1.1", "detour": "公共DNS"},
      {"tag": "privatehost", "type": "udp", "server": "127.0.0.1"}
    ],
    "rules": [
      {"rule_set": ["private_domain"], "server": "privatehost"},
      {"query_type": "HTTPS", "action": "reject"},
      {"clash_mode": "direct", "server": "domestic", "strategy": "prefer_ipv6"},
      {"clash_mode": "global", "server": "foreign", "strategy": "prefer_ipv4"},
      {"rule_set": ["cn_domain"], "server": "domestic", "strategy": "prefer_ipv6"}
    ],
    "final": "foreign",
    "strategy": "prefer_ipv4",
    "client_subnet": "223.5.5.5/24",
    "independent_cache": true,
    "reverse_mapping": true
  },
  "outbounds": [
    {"tag": "国内网站", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "直连"},
    {"tag": "通讯", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "社媒", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "AI", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "美国"},
    {"tag": "GitHub", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "油管", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "谷歌", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "Cloudflare", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "游戏平台", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "Iwara", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "特殊解锁", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "日区网站", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "日本"},
    {"tag": "涩涩", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "流媒体", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "台湾"},
    {"tag": "兜底", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "公共DNS", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "香港", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 80, "outbounds": []},
    {"tag": "台湾", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 80, "outbounds": []},
    {"tag": "新加坡", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 80, "outbounds": []},
    {"tag": "日本", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 80, "outbounds": []},
    {"tag": "美国", "type": "urltest", "url": "https://www.gstatic.com/generate_204", "interval": "5m", "tolerance": 80, "outbounds": []},
    {"tag": "GLOBAL", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "直连", "type": "direct"}
  ],
  "route": {
    "rules": [
      {"action": "sniff", "sniffer": ["http", "tls", "quic", "dns"]},
      {"inbound": ["dns-in"], "action": "hijack-dns"},
      {"ip_is_private": true, "outbound": "直连"},
      {"rule_set": ["private_domain"], "outbound": "直连"},
      {"rule_set": ["ads_domain"], "action": "reject"},
      {"clash_mode": "direct", "outbound": "直连"},
      {"clash_mode": "global", "outbound": "GLOBAL"},
      {"rule_set": ["custom_direct_class"], "outbound": "国内网站"},
      {"rule_set": ["custom_proxy_class"], "outbound": "兜底"},
      {"rule_set": ["steam@cn_domain", "games-cn_domain", "game-platforms-download_domain", "entertainment-cn_domain", "apple_domain", "microsoft@cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["communication_domain", "telegram_ip"], "outbound": "通讯"},
      {"rule_set": ["social-media-!cn_domain"], "outbound": "社媒"},
      {"rule_set": ["ai-!cn_domain"], "outbound": "AI"},
      {"rule_set": ["github_domain"], "outbound": "GitHub"},
      {"rule_set": ["youtube_domain"], "outbound": "油管"},
      {"rule_set": ["google_domain"], "outbound": "谷歌"},
      {"rule_set": ["cloudflare_domain"], "outbound": "Cloudflare"},
      {"rule_set": ["games-!cn_domain"], "outbound": "游戏平台"},
      {"domain_keyword": ["iwara"], "outbound": "Iwara"},
      {"domain_keyword": ["saucenao", "sankakucomplex"], "outbound": "特殊解锁"},
      {"rule_set": ["mega_domain", "ehentai_domain"], "outbound": "特殊解锁"},
      {"rule_set": ["pixiv_domain", "dmm_domain", "dlsite_domain", "jp_ip"], "outbound": "日区网站"},
      {"rule_set": ["porn_domain"], "outbound": "涩涩"},
      {"domain_keyword": ["emby"], "outbound": "流媒体"},
      {"rule_set": ["emby_domain", "entertainment_domain"], "outbound": "流媒体"},
      {"rule_set": ["cn_domain", "cn_ip"], "outbound": "国内网站"}
    ],
    "final": "兜底",
    "rule_set": [
      {"tag": "ads_domain", "type": "remote", "format": "binary", "url": "https://github.com/Lanlan13-14/Rules-singbox/raw/refs/heads/main/rules/banAd_mini.srs", "download_detour": "GitHub"},
      {"tag": "private_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/private.srs", "download_detour": "GitHub"},
      {"tag": "steam@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/steam@cn.srs", "download_detour": "GitHub"},
      {"tag": "games-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-cn.srs", "download_detour": "GitHub"},
      {"tag": "game-platforms-download_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-game-platforms-download.srs", "download_detour": "GitHub"},
      {"tag": "entertainment-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment-cn.srs", "download_detour": "GitHub"},
      {"tag": "apple_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple.srs", "download_detour": "GitHub"},
      {"tag": "microsoft@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/microsoft@cn.srs", "download_detour": "GitHub"},
      {"tag": "communication_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-communication.srs", "download_detour": "GitHub"},
      {"tag": "social-media-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-social-media-!cn.srs", "download_detour": "GitHub"},
      {"tag": "ai-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-ai-!cn.srs", "download_detour": "GitHub"},
      {"tag": "github_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/github.srs", "download_detour": "GitHub"},
      {"tag": "youtube_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs", "download_detour": "GitHub"},
      {"tag": "google_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/google.srs", "download_detour": "GitHub"},
      {"tag": "cloudflare_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cloudflare.srs", "download_detour": "GitHub"},
      {"tag": "games-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-!cn.srs", "download_detour": "GitHub"},
      {"tag": "mega_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/mega.srs", "download_detour": "GitHub"},
      {"tag": "ehentai_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/ehentai.srs", "download_detour": "GitHub"},
      {"tag": "pixiv_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/pixiv.srs", "download_detour": "GitHub"},
      {"tag": "dmm_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/dmm.srs", "download_detour": "GitHub"},
      {"tag": "dlsite_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/dlsite.srs", "download_detour": "GitHub"},
      {"tag": "porn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-porn.srs", "download_detour": "GitHub"},
      {"tag": "emby_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-emby.srs", "download_detour": "GitHub"},
      {"tag": "entertainment_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment.srs", "download_detour": "GitHub"},
      {"tag": "cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cn.srs", "download_detour": "GitHub"},
      {"tag": "telegram_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs", "download_detour": "GitHub"},
      {"tag": "jp_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/jp.srs", "download_detour": "GitHub"},
      {"tag": "cn_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/cn.srs", "download_detour": "GitHub"},
      {"tag": "custom_direct_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_direct.json", "download_detour": "GitHub"},
      {"tag": "custom_proxy_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_proxy.json", "download_detour": "GitHub"}
    ],
    "default_domain_resolver": {"server": "domestic"}
  },
  "inbounds": [
    {"tag": "dns-in", "type": "direct", "listen": "::", "listen_port": 1053},
    {"tag": "mixed-in", "type": "mixed", "listen": "::", "listen_port": 7890, "users": [{"username": "user", "password": "password"}]},
    {"tag": "socks-in", "type": "socks", "listen": "::", "listen_port": 10808, "users": [{"username": "user", "password": "password"}]},
    {"tag": "redirect-in", "type": "redirect", "listen": "::", "listen_port": 7891},
    {"tag": "tproxy-in", "type": "tproxy", "listen": "::", "listen_port": 7892},
    {"tag": "tun-in", "type": "tun", "interface_name": "stun0", "address": ["172.31.0.1/30", "fdfe:dcba:9876::1/126"], "auto_route": false, "auto_redirect": false}
  ],
  "experimental": {
    "cache_file": {"enabled": true, "path": "/etc/momo/run/cache.db", "store_rdrc": true},
    "clash_api": {"external_controller": "0.0.0.0:9090", "secret": "password", "default_mode": "rule"}
  },
  "log": {"disabled": false, "level": "error", "timestamp": true}
}
