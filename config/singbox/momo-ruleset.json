{
  "dns": {
    "servers": [
      {"tag": "domestic", "type": "udp", "server": "223.5.5.5"},
      {"tag": "foreign", "type": "https", "server": "1.1.1.1", "detour": "公共DNS"},
      {"tag": "privatehost", "type": "udp", "server": "127.0.0.1"}
    ],
    "rules": [
      {"rule_set": ["private_domain"], "server": "privatehost"},
      {"rule_set": ["ads_domain"], "action": "predefined", "rcode": "NXDOMAIN"},
      {"type": "logical", "mode": "and", "rules": [{"query_type": ["HTTPS"]}, {"rule_set": ["cn_domain"], "invert": true}], "action": "reject"},
      {"clash_mode": "direct", "server": "domestic"},
      {"clash_mode": "global", "server": "foreign"},
      {"rule_set": ["cn_domain"], "server": "domestic"}
    ],
    "final": "foreign",
    "client_subnet": "223.5.5.5/32",
    "independent_cache": true,
    "reverse_mapping": true
  },
  "outbounds": [
    {"tag": "国内网站", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "直连"},
    {"tag": "国外代理", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "通讯", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "社媒", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "AI", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "美国"},
    {"tag": "GitHub", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "油管", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "谷歌", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "Cloudflare", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "游戏平台", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "Iwara", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "特殊解锁", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "日区网站", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "日本"},
    {"tag": "涩涩", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "新加坡"},
    {"tag": "流媒体", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "台湾"},
    {"tag": "兜底", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "其他端口", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "直连"},
    {"tag": "公共DNS", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "香港", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "3m", "tolerance": 80, "filter": [{"action": "include", "keywords": ["香港"]}, {"action": "exclude", "keywords": ["免费"]}]},
    {"tag": "台湾", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "3m", "tolerance": 80, "filter": [{"action": "include", "keywords": ["台湾"]}, {"action": "exclude", "keywords": ["免费"]}]},
    {"tag": "新加坡", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "3m", "tolerance": 80, "filter": [{"action": "include", "keywords": ["新加坡"]}, {"action": "exclude", "keywords": ["免费"]}]},
    {"tag": "日本", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "3m", "tolerance": 80, "filter": [{"action": "include", "keywords": ["日本"]}, {"action": "exclude", "keywords": ["免费"]}]},
    {"tag": "美国", "type": "urltest", "outbounds": ["{all}"], "url": "https://cp.cloudflare.com", "interval": "3m", "tolerance": 80, "filter": [{"action": "include", "keywords": ["美国"]}, {"action": "exclude", "keywords": ["免费"]}]},
    {"tag": "GLOBAL", "type": "selector", "outbounds": ["香港", "台湾", "新加坡", "日本", "美国", "直连"], "default": "香港"},
    {"tag": "直连", "type": "direct"}
  ],
  "route": {
    "rules": [
      {"action": "sniff", "sniffer": ["http", "tls", "quic", "dns"]},
      {"inbound": ["dns-in"], "action": "hijack-dns"},
      {"ip_is_private": true, "outbound": "直连"},
      {"rule_set": ["private_domain"], "outbound": "直连"},
      {"rule_set": ["ads_domain"], "action": "reject"},
      {"type": "logical", "mode": "and", "rules": [{"protocol": ["quic"]}, {"rule_set": ["cn_domain"], "invert": true}], "action": "reject"},
      {"type": "logical", "mode": "and", "rules": [{"protocol": ["quic"]}, {"rule_set": ["cn_ip"], "invert": true}], "action": "reject"},
      {"clash_mode": "direct", "outbound": "直连"},
      {"clash_mode": "global", "outbound": "GLOBAL"},
      {"rule_set": ["custom_direct_class"], "outbound": "国内网站"},
      {"rule_set": ["custom_proxy_class"], "outbound": "国外代理"},
      {"rule_set": ["steam@cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["games-cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["game-platforms-download_domain"], "outbound": "国内网站"},
      {"rule_set": ["entertainment-cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["public-tracker_domain"], "outbound": "国内网站"},
      {"rule_set": ["apple_domain"], "outbound": "国内网站"},
      {"rule_set": ["microsoft@cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["communication_domain"], "outbound": "通讯"},
      {"rule_set": ["social-media-!cn_domain"], "outbound": "社媒"},
      {"rule_set": ["ai-!cn_domain"], "outbound": "AI"},
      {"rule_set": ["github_domain"], "outbound": "GitHub"},
      {"rule_set": ["youtube_domain"], "outbound": "油管"},
      {"rule_set": ["google_domain"], "outbound": "谷歌"},
      {"rule_set": ["cloudflare_domain"], "outbound": "Cloudflare"},
      {"rule_set": ["games-!cn_domain"], "outbound": "游戏平台"},
      {"domain_keyword": ["iwara"], "outbound": "Iwara"},
      {"domain_keyword": ["saucenao"], "outbound": "特殊解锁"},
      {"domain_keyword": ["sankakucomplex"], "outbound": "特殊解锁"},
      {"rule_set": ["mega_domain"], "outbound": "特殊解锁"},
      {"rule_set": ["ehentai_domain"], "outbound": "特殊解锁"},
      {"rule_set": ["pixiv_domain"], "outbound": "日区网站"},
      {"rule_set": ["dmm_domain"], "outbound": "日区网站"},
      {"rule_set": ["dlsite_domain"], "outbound": "日区网站"},
      {"rule_set": ["porn_domain"], "outbound": "涩涩"},
      {"domain_keyword": ["emby"], "outbound": "流媒体"},
      {"rule_set": ["emby_domain"], "outbound": "流媒体"},
      {"rule_set": ["entertainment_domain"], "outbound": "流媒体"},
      {"rule_set": ["gfw_domain"], "outbound": "国外代理"},
      {"rule_set": ["geolocation-!cn_domain"], "outbound": "国外代理"},
      {"rule_set": ["cn_domain"], "outbound": "国内网站"},
      {"rule_set": ["telegram_ip"], "outbound": "通讯"},
      {"rule_set": ["jp_ip"], "outbound": "日区网站"},
      {"rule_set": ["cn_ip"], "outbound": "国内网站"},
      {"port": [53, 853, 80, 443, 8080, 8443], "outbound": "兜底"}
    ],
    "final": "其他端口",
    "rule_set": [
      {"tag": "ads_domain", "type": "remote", "format": "binary", "url": "https://anti-ad.net/anti-ad-sing-box.srs"},
      {"tag": "private_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/private.srs"},
      {"tag": "steam@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/steam@cn.srs"},
      {"tag": "games-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-cn.srs"},
      {"tag": "game-platforms-download_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-game-platforms-download.srs"},
      {"tag": "entertainment-cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment-cn.srs"},
      {"tag": "public-tracker_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-public-tracker.srs"},
      {"tag": "apple_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple.srs"},
      {"tag": "microsoft@cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/microsoft@cn.srs"},
      {"tag": "communication_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-communication.srs"},
      {"tag": "social-media-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-social-media-!cn.srs"},
      {"tag": "ai-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-ai-!cn.srs"},
      {"tag": "github_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/github.srs"},
      {"tag": "youtube_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs"},
      {"tag": "google_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/google.srs"},
      {"tag": "cloudflare_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cloudflare.srs"},
      {"tag": "games-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-games-!cn.srs"},
      {"tag": "mega_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/mega.srs"},
      {"tag": "ehentai_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/ehentai.srs"},
      {"tag": "pixiv_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/pixiv.srs"},
      {"tag": "dmm_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/dmm.srs"},
      {"tag": "dlsite_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/dlsite.srs"},
      {"tag": "porn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-porn.srs"},
      {"tag": "emby_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-emby.srs"},
      {"tag": "entertainment_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-entertainment.srs"},
      {"tag": "gfw_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/gfw.srs"},
      {"tag": "geolocation-!cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/geolocation-!cn.srs"},
      {"tag": "cn_domain", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cn.srs"},
      {"tag": "telegram_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs"},
      {"tag": "jp_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/jp.srs"},
      {"tag": "cn_ip", "type": "remote", "format": "binary", "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/cn.srs"},
      {"tag": "custom_direct_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_direct.json"},
      {"tag": "custom_proxy_class", "type": "remote", "format": "source", "url": "https://raw.githubusercontent.com/xiaojimie/Template-Config/refs/heads/main/custom_proxy.json"}
    ],
    "default_domain_resolver": {"server": "domestic"}
  },
  "inbounds": [
    {"tag": "dns-in", "type": "direct", "listen": "::", "listen_port": 1053},
    {"tag": "http-in", "type": "http", "listen": "::", "listen_port": 8080, "users": [{"username": "user", "password": "password"}]},
    {"tag": "socks-in", "type": "socks", "listen": "::", "listen_port": 10808, "users": [{"username": "user", "password": "password"}]},
    {"tag": "redirect-in", "type": "redirect", "listen": "::", "listen_port": 7890},
    {"tag": "tproxy-in", "type": "tproxy", "listen": "::", "listen_port": 7891},
    {"tag": "tun-in", "type": "tun", "interface_name": "momo", "address": ["172.31.0.1/30", "fdfe:dcba:9876::1/126"], "auto_route": false, "auto_redirect": false}
  ],
  "experimental": {
    "cache_file": {"enabled": true, "path": "/etc/momo/run/cache.db", "store_fakeip": false},
    "clash_api": {"external_controller": "0.0.0.0:9090", "secret": "password", "default_mode": "rule"}
  },
  "log": {"disabled": false, "level": "error", "timestamp": true}
}
